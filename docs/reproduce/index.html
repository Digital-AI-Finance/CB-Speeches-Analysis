<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproduce - CB Speeches Analysis</title>
    <style>
        :root { --primary: #1a5f7a; --accent: #f59e0b; --text: #1e293b; --bg: #f8fafc; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; line-height: 1.6; color: var(--text); background: var(--bg); }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        header { background: linear-gradient(135deg, var(--primary), #0f3d4c); color: white; padding: 30px 0; text-align: center; }
        header h1 { font-size: 1.8rem; }
        nav { background: white; padding: 15px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        nav a { margin: 0 15px; text-decoration: none; color: var(--primary); font-weight: 500; }
        main { padding: 40px 0; }
        .card { background: white; border-radius: 8px; padding: 30px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        h2 { color: var(--primary); margin-bottom: 15px; }
        h3 { margin: 20px 0 10px; color: var(--primary); }
        pre { background: #1e293b; color: #e2e8f0; padding: 20px; border-radius: 8px; overflow-x: auto; margin: 15px 0; }
        code { font-family: 'Consolas', monospace; }
        .inline-code { background: #f1f5f9; padding: 2px 6px; border-radius: 4px; color: var(--text); }
        ul { margin-left: 20px; }
        li { margin: 8px 0; }
        footer { text-align: center; padding: 30px; color: #666; }
    </style>
</head>
<body>
    <header><div class="container"><h1>Reproduce the Analysis</h1></div></header>
    <nav>
        <a href="../index.html">Overview</a>
        <a href="../dashboard.html">Dashboard</a>
        <a href="../figures/index.html">Figures</a>
        <a href="../methodology/index.html">Methodology</a>
        <a href="index.html">Reproduce</a>
    </nav>
    <main class="container">
        <div class="card">
            <h2>Requirements</h2>
            <ul>
                <li>Python 3.9 or higher</li>
                <li>Git</li>
                <li>~500MB disk space (includes speech data)</li>
                <li>(Optional) FRED API key for fresh macro data download</li>
            </ul>
        </div>

        <div class="card">
            <h2>Step 1: Clone Repository</h2>
            <pre><code>git clone https://github.com/Digital-AI-Finance/CB-Speeches-Analysis.git
cd CB-Speeches-Analysis</code></pre>
        </div>

        <div class="card">
            <h2>Step 2: Install Dependencies</h2>
            <pre><code># Create virtual environment (recommended)
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt</code></pre>
        </div>

        <div class="card">
            <h2>Step 3: Run Analysis Pipeline</h2>
            <pre><code># Run full pipeline (uses cached data by default)
python -c "from analysis.run_all import run_pipeline; run_pipeline(use_cached=True, verbose=True)"

# Or run with fresh FRED data (requires API key)
export FRED_API_KEY="your_api_key_here"
python -c "from analysis.run_all import run_pipeline; run_pipeline(use_cached=False, verbose=True)"</code></pre>
        </div>

        <div class="card">
            <h2>Step 4: Generate Charts</h2>
            <pre><code>cd charts
python run_all_charts.py</code></pre>
            <p>This generates all 12 analysis charts as PDFs in their respective folders.</p>
        </div>

        <div class="card">
            <h2>Step 5: Run Tests</h2>
            <pre><code>python -m pytest tests/ -v</code></pre>
        </div>

        <div class="card">
            <h2>Step 6: Launch Dashboard</h2>
            <h3>Option A: Streamlit (Interactive)</h3>
            <pre><code>streamlit run app.py</code></pre>

            <h3>Option B: Static HTML</h3>
            <pre><code>python generate_dashboard.py
# Open dashboard.html in browser</code></pre>
        </div>

        <div class="card">
            <h2>Output Files</h2>
            <p>After running the pipeline, you'll find these files in <code class="inline-code">data/</code>:</p>
            <ul>
                <li><code class="inline-code">processed_macro.csv</code> - Standardized macro indicators</li>
                <li><code class="inline-code">pca_components.csv</code> - PC1 (Macro), PC2 (Inflation)</li>
                <li><code class="inline-code">pca_loadings.csv</code> - Component weights</li>
                <li><code class="inline-code">breakpoints.json</code> - Structural break dates</li>
                <li><code class="inline-code">sentiment_aggregated.csv</code> - Monthly sentiment</li>
                <li><code class="inline-code">correlation_matrix.csv</code> - Final correlations</li>
            </ul>
        </div>

        <div class="card">
            <h2>Troubleshooting</h2>
            <h3>FRED API Issues</h3>
            <p>If you don't have a FRED API key, the pipeline will use the cached <code class="inline-code">macroeconomic_data.csv</code> file included in the repository.</p>

            <h3>Memory Issues</h3>
            <p>The speech parquet file (~50MB) requires adequate RAM. If you encounter memory errors, ensure at least 4GB RAM is available.</p>
        </div>
    </main>
    <footer><p>CB Speeches Analysis | SNSF Grant IZCOZ0_213370</p></footer>
</body>
</html>
